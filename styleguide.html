<!doctype html>
<html lang="en">
	<head>
		<meta charset="utf-8">
		<title>Blog posts: Frank Fusion: ColdFusion, JavaScript, CSS, Web development, Linux, etc.</title>
		<meta name="description" content="ColdFusion, JavaScript, CSS, Web development, Linux, etc.">
		<meta name="author" content="Dominic Watson">

		<!--[if lt IE 9]>
		<script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
		<![endif]-->

		<!-- atom feed -->
		<link rel="alternate" type="application/atom+xml" href="/atom.xml">

		<!-- css -->
		<link href='http://fonts.googleapis.com/css?family=Ubuntu+Mono|Droid+Serif|Open+Sans' rel='stylesheet' type='text/css'>
		<link rel="stylesheet" type="text/css" href="./static/css/lib/normalize.css" />
		<link rel="stylesheet" type="text/css" href="./static/css/typography.css" />
		<link rel="stylesheet" type="text/css" href="./static/css/lib/syntax.css" />
		<link rel="stylesheet" type="text/css" href="./static/css/layout.css" />
		<link rel="stylesheet" type="text/css" href="./static/css/article.css" />
		<link rel="stylesheet" type="text/css" href="./static/css/print.css" />
	</head>
	<body>
		<div id="container">
			<header>
				<div class="centerizer">
					<div class="blog-title">
						<h1><a href="/">Frank Fusion</a></h1>
						<p>A blog on web development</p>
					</div>

					<a id="fork-me"   class="no-print" href="https://github.com/dominicwatson" title="Fork me on GitHub">Fork me on GitHub</a>
					<div class="site-search-container">
						<input id="site-search-input" placeholder="Search posts and categories" />
					</div>
					<a id="show-keyboard-shortcuts" class="no-print" data-goto-key="?" href="#keyboard-navigation-help" title="Show keyboard shortcuts (type '?' to toggle)">?</a>
					<div id="keyboard-navigation-help">
						<h1>Keyboard shortcuts</h1>
						<dl>
							<dt>General</dt>
							<dd><span><strong>g</strong> then <strong>h</strong></span> Home</dd>
							<dd><span><strong>p</strong> then <strong>p</strong></span> Projects</dd>
							<dd><span><strong>g</strong> then <strong>a</strong></span> About</dd>
							<dd><span><strong>?</strong></span> Show/hide keyboard shortcut help</dd>
						</dl>

						<dl>
							<dt>Post lists</dt>
							<dd><span><strong>1</strong></span> Select first post in list</dd>
							<dd><span><strong>&uarr;</strong> or <strong>&darr;</strong></span> Select previous / next post</dd>
							<dd><span><strong>ENTER</strong></span> Go to selected post</dd>
						</dl>

						<dl>
							<dt>Blog post</dt>
							<dd><span><strong>g</strong> then <strong>1</strong>, <strong>2</strong>, <strong>3</strong>, etc.</span> Go to category <em>n</em></dd>
							<dd><span><strong>g</strong> then <strong>n</strong></span> Newer (next) post</dd>
							<dd><span><strong>g</strong> then <strong>o</strong></span> Older (previous) post</dd>
						</dl>
					</div>
				</div>
			</header>
			<nav class="no-print">
				<ul class="centerizer">
					<li><a data-goto-key="h" href="/"><b class="shortcut-key">H</b>ome</a></li>
					<li><a data-goto-key="p" href="/projects.html"><b class="shortcut-key">P</b>rojects</a></li>
					<li><a data-goto-key="a" href="/about-me.html"><b class="shortcut-key">A</b>bout me</a></li>
				</ul>
			</nav>
			<div id="main" role="main">
				<div class="centerizer">
					<h1 id="page-title">List of posts</h1>
					<ul class="post-list">
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/11/keyboard-shortcuts.html" tabindex="1">Keyboard shortcuts</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/11/code-like-a-jedi.html" tabindex="2">Code like a Jedi</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/07/good-enough-software-some-psychology.html" tabindex="3">Good Enough Software - Some Psychology</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/07/the-law-of-demeter.html" tabindex="4">The Law of Demeter</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/06/good-enough-software.html" tabindex="5">Good enough software</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/05/coffeescript-comes-to-cfstatic.html" tabindex="6">CoffeeScript comes to CfStatic</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/05/developers-should-be-encouraged-to-shower.html" tabindex="7">Developers should be encouraged to shower</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/03/my-first-bit-of-ruby%2C-nice-to-see-in-coldfusion.html" tabindex="8">My first bit of Ruby, a nice to see in ColdFusion</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/01/cfstatic---embedding-css-images.html" tabindex="9">CfStatic - embedding css images</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2012/01/io-and-the-princess-bride.html" tabindex="10">Io and The Princess Bride</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/10/blueprint-style-grids-using-less-css.html" tabindex="11">Blueprint style grids using LESS CSS</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/another-sublime-plugin---cfquickdocs-searcher.html" tabindex="12">Another Sublime Plugin - CFQuickDocs Searcher</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/my-first-sublime-text-2-plugin---mxunit-launcher.html" tabindex="13">My First Sublime Text 2 Plugin - MXUnit Launcher</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/cfstatic-now-supports-compiling-of-less-css.html" tabindex="14">CfStatic now supports compiling of LESS CSS</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/understanding-the-package-minify-mode-in-cfstatic.html" tabindex="15">Understanding the package minify mode in CfStatic</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/cfstatic-framework-release.html" tabindex="16">CfStatic Framework Release</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/cfspreadsheet-and-the-yucky-colors.html" tabindex="17">CfSpreadsheet and the Yucky Colors</a></li>
		 				<li class="post-list-item"><a class="post-list-item-link" href="/2011/09/source-code-now-on-github.html" tabindex="18">Source code now on GitHub</a></li>
					</ul>

					<article>
					<section id="post-header">
						<nav id="post-navigation">
							<span class="page-nav-item">
								<a rel="prev" data-goto-key="o" href="/2010/12/cheaper-online-backup-and-sync-part-2.html" title="View previous post, 'Cheaper online backup and sync: Part 2, S3Cmd'">&larr; <b class="shortcut-key">O</b>lder</a>
							</span>
 							<span class="page-nav-item">
								<a rel="next" data-goto-key="n" href="/2010/12/apache-solr-part-ii-installing-solr.html" title="View next post, 'Apache Solr, Part II: Installing Solr with Tomcat'"><b class="shortcut-key">N</b>ewer &rarr;</a>
							</span>
						</nav>
						<aside class="time">13 December 2010</aside>
						<h1 id="page-title">Apache Solr, or, 'departing from the confines of cfsearch': Part I</h1>
						<aside id="published-in" class="no-print">Published in <a href="/categories/ColdFusion/">ColdFusion</a> and <a href="/categories/Solr/">Solr</a></aside>
					</section>

					<section id="post-content">
						<p>I've been putting off blogging some of the awesome discoveries I've been making around <a href="http://lucene.apache.org/solr/">Apache Solr</a> due to the daunting legion of things to write about. Also, multi-part blog posts seem all the rage. So, here in bite size chunks, is my sharing of true <em>Solr power exploitation</em> in Adobe ColdFusion / Railo / Bluedragon.<!--more--></p>
						<h2>Intro: is <em>cfsearch</em> doing enough for you?</h2>
						<p>I have used ColdFusion's implementation of Verity (and now Solr) in several different projects and have repeatedly encountered the following 3 problems:</p>

						<ol>
						<li>I've found deployment flaky and awkward. Syncing a largish refreshed collection around a cluster of servers has been a behemoth of a task, with a less than 100% success rate. The refreshing of the large collection has also been timely and taken up server resources.</li>
						<li>I can't get the cfsearch query resultset sorted by anything other than the relevancy score. This is especially a problem when paginating results that have been sorted by a user after search; I have to get <em>all</em> the results from cfsearch, sort using a query of queries, and only then paginate the results.</li>
						<li>I'm limited to the number of distinct fields that I can use and these fields have awkward names that need translating if code is to be readable by other programmers (i.e. <em>custom1</em>, <em>custom2... etc.</em>). This invariably leads to running two queries and joining them using a query of queries; one query to the search engine, another to the database.</li>
						</ol>


						<p>In other words, despite its fantastically easy use in simple search scenarios, I think cfsearch does not heed well the famous Albert Einstein misquote:</p>

						<blockquote><p>'Everything should be made as simple as possible, but not simpler.'</p></blockquote>

						<p>So, if you've encountered these problems and created more code to work around the limitations than is reasonable, then read on...</p>

						<h2>Teaser: results I have easily achieved with Solr, outside of cfsearch</h2>

						<p>After a little getting to know of the workings of Solr (no more than a couple of week's tinkering), I managed to get a working search engine with the following benefits:</p>

						<ol>
						<li>Complete data import in seconds where it previously took many minutes</li>
						<li>Replication: perform said data import on a non-worker instance and have it near instantly mirror around a live cluster of search collections</li>
						<li>Load balancing: true load balancing of the cluster of live slaves independent of the CF cluster</li>
						<li>Defining of my own document schema with as many <em>typed</em> fields as I like, each of which can contain distinct multiple values and be named appropriately</li>
						<li>Defining of custom field types; this has the upshot of a single field being able to have its own search rules such as stopwords and synonyms (after all, not all fields will have the same set of synonyms and stopwords)</li>
						<li>Searching across multiple columns, each with a programmer-defined search weight at search time. E.g. search across the artist field, album field and track title field - give track title the most weight, album a little less and artist next to no weight at all</li>
						<li>Defining what columns I want returned from any given search</li>
						<li>Sorting on multiple columns</li>
						<li>Pagination</li>
						<li>Faceted search. What this means is that I can pass Solr a list of columns to 'facet' with my search query and I will receive back, along with my search results, grouped counts of the values in those columns. E.g. I search for '<em>Etude</em>' in my <em>tracks</em> collection and ask to facet the <em>genre</em> column, my facet result for genre looks like: '<em>Classical (2,454), Pop (23), Metal(1)</em>'</li>
						<li>Explicit filtering on columns, e.g. Search all tracks where the genre is exactly equal to '<em>Classical</em>' and the period '<em>1920s</em>'</li>
						<li><em>'You may also like...'</em> search queries</li>
						</ol>


						<p>This is scratching the surface, I'm sure, but has really got me fired up and hot on the trail of bringing all this to ColdFusion in an easy to use framework (and before that is near completion, a set of blog posts to share the excitement).</p>

						<h2>Coming up...</h2>

						<p>In the next few posts on this topic, I intend to document how I achieved all of the above and hope to inspire others to take the tiny jump away from the confines of cfsearch.</p>

						</section>

						<section id="comments-container" title="discussion" class="no-print">
							<h1>Discussion</h1>
							<div id="disqus_thread"></div>
						</section>
					</article>

				</div>
			</div>
			<footer>
				<div class="centerizer">
					<p>&copy; Dominic Watson 2008-2012. <span class="no-print" id="powered-by">Site powered by <a href="https://github.com/mojombo/jekyll" target="_blank">Jekyll</a>, <a href="http://aws.amazon.com/s3/" target="_blank">Amazon S3</a> and <a href="https://github.com/DominicWatson/frankfusion" target="_blank">GitHub</a></span></p>
				</div>
			</footer>
		</div><!--! end of #container -->

  		<script src="./static/js/jquery.js"></script>
  		<script src="./static/js/jquery.hotkeys.js"></script>
  		<script src="./static/js/site.search.js"></script>
  		<script src="./static/js/frank.fusion.js"></script>
	</body>
</html>
